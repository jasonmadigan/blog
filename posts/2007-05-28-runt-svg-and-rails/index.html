<!doctype html><html lang=en-us><head><title>Runt - SVG & Rails // Jason Madigan</title>
<link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.140.2"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jason Madigan"><meta name=description content><link rel=stylesheet href=/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Runt - SVG & Rails"><meta name=twitter:description content="While developing Runt over the past few months it became obvious mid-way through development that the integration of graphing was somewhat of an afterthought. That’s okay though because we’re agile, right?
Graphing SNMP data in Rails applications (or any other application for that matter) is difficult for a number of reasons:
What the hell do I graph?
SNMP data is so varied in scope that we need to narrow our scope in order to graph something useful. We don’t want to graph sysName against sysDescr because that’s stupid and completely useless. Graphs obviously need need be composed of numerical data, so any SNMP data composed of strings is likely going to be useless. Right, so what kind of data types should we be looking at (assuming we’re working with protocol version 2c)?"><meta property="og:url" content="/posts/2007-05-28-runt-svg-and-rails/"><meta property="og:site_name" content="Jason Madigan"><meta property="og:title" content="Runt - SVG & Rails"><meta property="og:description" content="While developing Runt over the past few months it became obvious mid-way through development that the integration of graphing was somewhat of an afterthought. That’s okay though because we’re agile, right?
Graphing SNMP data in Rails applications (or any other application for that matter) is difficult for a number of reasons:
What the hell do I graph?
SNMP data is so varied in scope that we need to narrow our scope in order to graph something useful. We don’t want to graph sysName against sysDescr because that’s stupid and completely useless. Graphs obviously need need be composed of numerical data, so any SNMP data composed of strings is likely going to be useless. Right, so what kind of data types should we be looking at (assuming we’re working with protocol version 2c)?"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2007-05-28T21:00:00+00:00"><meta property="article:modified_time" content="2007-05-28T21:00:00+00:00"></head><body><header class=app-header><a href=/><img class=app-header-avatar src=/0.jpg alt="Jason Madigan"></a>
<span class=app-header-title>Jason Madigan</span><nav class=app-header-menu><a class=app-header-menu-item href=/about/>About</a></nav><p>He's just zis guy, ya know?</p><div class=app-header-social><a href=https://github.com/jasonmadigan target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
</a><a href=https://twitter.com/jasonmadigan target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Runt - SVG & Rails</h1><div class=post-meta><div><svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
May 28, 2007</div><div><svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
3 min read</div></div></header><div class=post-content><p>While developing Runt over the past few months it became obvious mid-way
through development that the integration of graphing was somewhat of an
afterthought. That&rsquo;s okay though because we&rsquo;re agile, right?</p><p>Graphing SNMP data in Rails applications (or any other application for
that matter) is difficult for a number of reasons:</p><ul><li><p>What the hell do I graph?</p><ul><li>SNMP data is so varied in scope that we need to narrow our scope
in order to graph something useful. We don&rsquo;t want to graph
<strong>sysName</strong> against <strong>sysDescr</strong> because that&rsquo;s stupid and
completely useless.</li><li>Graphs obviously need need be composed of numerical data, so any
SNMP data composed of strings is likely going to be useless.</li></ul></li><li><p>Right, so what kind of data types should we be looking at (assuming
we&rsquo;re working with protocol version 2c)?</p><ul><li>Integer32/Integer
(Enumerated)/Unsigned32/Gauge32/Counter32/TimeTicks/Opaque/Bits</li></ul></li></ul><p>With these data types in mind, our scope is still way too vague for us
to be able to graph any meaningful data. With a deadline looming, I made
the decision to limit the scope of graphing in Runt to just bandwidth,
something which most SNMP graphing applications out there focus on
(<a href=http://oss.oetiker.ch/mrtg/>MRTG</a> for example). Having made my
decision I was then faced with some interesting decisions regarding
graphing. Initially I wanted graphing to be as sexy as that found in the
<a href=http://www.polarcloud.com/tomato/>Tomato</a> firmware installed on my
WRT54GL router.</p><p>Tomato generates its graphs in between AJAX requests and renders them to
the user using
<a href=http://en.wikipedia.org/wiki/Scalable_Vector_Graphics>SVG</a>.
Unfortunately, browser SVG support is patchy for Intel Mac users with
Safari 2.0.4 (even though SVG support landed in WebKit landed
<a href="http://webkit.org/blog/?p=35">over two years ago</a>). Adobe
have offered a plugin for SVG support in Safari (which is going to be
unsupported next year), but only for users running Safari on PowerPC
Macs. As an Intel user you could of course run Safari under Rosetta to
enable the plugin to function but jesus don&rsquo;t. Thankfully SVG support
will finally find its way into Safari 3.0 in Leopard, but that&rsquo;s several
months away. IE6/7 users enjoy SVG support through the same Adobe
plugin, while Gecko based browser users see SVG built-in.</p><p>With this in mind, and due to the fact I&rsquo;m a selfish jerk who uses
Safari, I decided against using SVG in Runt, at least for the time
being. My options for graphing in Rails boiled down to three contenders:</p><ul><li><a href=http://nubyonrails.com/pages/gruff>Gruff</a> - pretty graphs that are
rendered as PNGs. Rails plugin.</li><li><a href=http://scruffy.rubyforge.org/>Scruffy</a> - - pretty graphs,
internally rendered using SVG and it can spit out your graphs in
pretty much any format imaginable. Unfortunately it hasn&rsquo;t been
updated in over 9 months.</li><li><a href=http://ziya.liquidrail.com/>ZiYa</a> - pretty Flash graphs. Flash,
ugh.</li></ul><p>I eventually rolled with Gruff since I found it the easiest to get to
grips with and because it somehow <strong>felt</strong> more Rails like than the
others. I was seriously considering ZiYA for several weeks but
considering how much I&rsquo;ve come to hate almost all implementations of
Flash &ldquo;hay guys lets totally offload the rendering of this website to
some proprietary plugin! This is a great idea, right guys! Guys?!&rdquo; I
decided it was best to roll with something I could stomach myself using.
Unfortunately, this meant that interactivity with the graph was going to
be seriously limited as Gruff was just going to throw rendered PNGs at a
user with a rather horrible rendering delay between AJAX requests. This
is something that has bothered me ever since I chose to use Gruff, but
what&rsquo;s done is done.</p><p>The next iteration of Runt will see me revisit the idea of using SVG
rendering because it&rsquo;s sexy as hell and because, for the time being at
least, I&rsquo;ve begun using Firefox 2.0 regularly once more.</p></div><div class=post-footer></div></article></main></body></html>
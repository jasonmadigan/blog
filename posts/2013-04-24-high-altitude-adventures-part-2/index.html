<!doctype html><html lang=en-us><head><title>High Altitude Adventures - Part 2 // Jason Madigan</title>
<link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.140.2"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jason Madigan"><meta name=description content><link rel=stylesheet href=/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css><meta name=twitter:card content="summary"><meta name=twitter:title content="High Altitude Adventures - Part 2"><meta name=twitter:description content="Following on from my previous post, I’m going to go into a little more detail as to what we’re planning and what I’ve built so far - hopefully it will be of interest!
The payload (or safeload as I’m now calling it) is now complete. It consists of:
An Arduino Mega 2560 MTK3339 GPS Radiometrix NTX2 (434.650MHz @ 10mW) Xexun TK102 GPS Tracker Veho Muvi HD 1080p Camcorder Siemens TC35 RS232 GSM modem"><meta property="og:url" content="/posts/2013-04-24-high-altitude-adventures-part-2/"><meta property="og:site_name" content="Jason Madigan"><meta property="og:title" content="High Altitude Adventures - Part 2"><meta property="og:description" content="Following on from my previous post, I’m going to go into a little more detail as to what we’re planning and what I’ve built so far - hopefully it will be of interest!
The payload (or safeload as I’m now calling it) is now complete. It consists of:
An Arduino Mega 2560 MTK3339 GPS Radiometrix NTX2 (434.650MHz @ 10mW) Xexun TK102 GPS Tracker Veho Muvi HD 1080p Camcorder Siemens TC35 RS232 GSM modem"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-04-24T21:20:00+00:00"><meta property="article:modified_time" content="2013-04-24T21:20:00+00:00"></head><body><header class=app-header><a href=/><img class=app-header-avatar src=/0.jpg alt="Jason Madigan"></a>
<span class=app-header-title>Jason Madigan</span><nav class=app-header-menu><a class=app-header-menu-item href=/about/>About</a></nav><p>He's just zis guy, ya know?</p><div class=app-header-social><a href=https://github.com/jasonmadigan target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
</a><a href=https://twitter.com/jasonmadigan target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>High Altitude Adventures - Part 2</h1><div class=post-meta><div><svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Apr 24, 2013</div><div><svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
3 min read</div></div></header><div class=post-content><p>Following on from my previous post, I&rsquo;m going to go into a little more detail as to what we&rsquo;re planning and what I&rsquo;ve built so far - hopefully it will be of interest!</p><p>The payload (or safeload as I&rsquo;m now calling it) is now complete. It consists of:</p><ul><li><a href="http://www.amazon.co.uk/gp/product/B007TQ6TSK/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B007TQ6TSK&amp;linkCode=as2&amp;tag=jasomadi-21">An Arduino Mega 2560</a></li><li><a href="http://www.amazon.co.uk/gp/product/B008FZIZUE/ref=as_li_ss_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B008FZIZUE&amp;linkCode=as2&amp;tag=jasomadi-21">MTK3339 GPS</a></li><li><a href="http://www.amazon.co.uk/gp/product/B0084DP4CY/ref=as_li_ss_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B0084DP4CY&amp;linkCode=as2&amp;tag=jasomadi-21">Radiometrix NTX2</a> (434.650MHz @ 10mW)</li><li><a href="http://www.amazon.co.uk/gp/product/B003XDQUQE/ref=as_li_ss_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B003XDQUQE&amp;linkCode=as2&amp;tag=jasomadi-21">Xexun TK102 GPS Tracker</a></li><li><a href="http://www.amazon.co.uk/gp/product/B004AP9FSE/ref=as_li_ss_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B004AP9FSE&amp;linkCode=as2&amp;tag=jasomadi-21">Veho Muvi HD 1080p Camcorder</a></li><li><a href="http://www.amazon.co.uk/gp/product/B006CHEUSI/ref=as_li_ss_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B006CHEUSI&amp;linkCode=as2&amp;tag=jasomadi-21">Siemens TC35 RS232 GSM modem</a></li></ul><p><img src=https://dl.dropboxusercontent.com/u/1336005/blog/payload.jpg alt=Payload></p><p>It took a while to piece together the kind of parts I needed. I originally thought I could use an old Arduino Diecimila that I had lying around, along with a nice EM406-A GPS module that I&rsquo;d used before. Unfortunately, the Diecimila only had 16KB of flash (2KB taken by the bootloader), and it looked like I&rsquo;d need at least 32KB.</p><p>I bought an Uno and initally everything was going well - I had the EM406-A hooked up and was processing NMEA with relative ease, thanks to the great TinyGPS library. The NTX2 arrived a little later - this is when the problems began.</p><h2 id=software-serial-ports>Software Serial Ports</h2><p>I planned to transmit telemetry throughout the flight with the NTX2. To do this, I was going to use RTTY (simple frequency shift keying) to encode telemetry and transmit. This worked fine in isolation, so I then hooked up the GPS again and tried to send some telemetry. There were weird errors in the RTTY transmission that I spent a few days tracking down late at night. The problem in the end turned out to be the SoftwareSerial port I was using.</p><p>Uno&rsquo;s only come with one hardware UART, and it&rsquo;s wired into the USB port via FTDI. It was available to use, but it&rsquo;s fiddly and it&rsquo;d mean swapping things around when it came to programming over USB (which I needed to do a lot of, since nothing worked!), so the EM-406A was hooked up via a software serial port. Arduino&rsquo;s SoftwareSerial is interrupt driven so NMEA data coming in on the SoftwareSerial port would trigger an interupt - RTTY transmissions are timing sensitive, so these interrupts interfered with transmission and introduced errors.</p><p>Once I&rsquo;d figured out was going wrong, disabling interrupts and having a &ldquo;quiet period&rdquo; for RTTY transmissions seemed to mostly fix things. Half way through uncovering the fix, however, I got frustrated and ordered an Arduino Mega (which has 4 hardware UARTs). When the Mega arrived, things got a lot simpler - lots of complicated timing logic could be removed.</p><h2 id=rtty>RTTY</h2><p>I&rsquo;ll post more about this later, but here&rsquo;s a short video of an RTTY transmission of some telemetry:</p><iframe width=560 height=315 src=https://www.youtube.com/embed/v6Pq3bvAa8k frameborder=0 allowfullscreen></iframe></div><div class=post-footer></div></article></main></body></html>